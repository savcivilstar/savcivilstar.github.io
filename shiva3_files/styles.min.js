"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("styles/utils/styleUtils",["lodash","color","fonts","utils"],function(t,e,n,o){var a=function(t,e){var o=n.fontUtils.parseFontStr(t),a=n.fontUtils.getFontFamilyWithFallbacks(o.family);return{editorKey:e,lineHeight:o.lineHeight,style:o.style,weight:o.weight,size:o.size,fontFamily:o.family.toLowerCase(),value:"font:"+[o.style,o.variant,o.weight,o.size+"/"+o.lineHeight,a].join(" ")+";"}},r=function(t){var n=t.split(",");return e({r:n[0],g:n[1],b:n[2]}).hexString()},l=function(e,n,a,r){var l=t.assign(f(r,n),H(e)),i=o.fonts.uploadedFontsUtils,s=t(l).map(function(e){return t.isString(e)&&(e=JSON.parse(e)),e.family||e.fontFamily}).filter(function(t){return i.isUploadedFontFamily(t)}).union().value();return i.getUploadedFontFaceStyles(s,a.mediaRootUrl)},i=function(e,n,o,a,r){return s(t.assign(f(o,n),H(e)),a,r)},s=function(e,o,a){var r={};t.forEach(e,function(t){"string"==typeof t&&(t=JSON.parse(t)),r[t.family||t.fontFamily]=1});var l=n.fontUtils.getFontsUrlWithParams(r,o,a);return t.includes(l,"family=null")?"":l},f=function(e,n){var o={},a=u(e,n);return t.forEach(a,function(t,e){e.match("param_font_")&&(o[e.replace("param_font_","")]=t)}),o},u=function(t,e){var n=e[t];if(!n)return null;var o=n.style&&n.style.properties;return o||null},c=function(n,a,l,i){var s,f=a[n];if(f&&!t.isString(f)&&f.value)return{themeName:void 0,value:f.value.cssColor||f.value.color.value||f.value.rgba};if(!l&&f&&t.isString(f)&&o.stringUtils.startsWith(f,"color_")){var u=o.colorParser.getColorValue(i,f);u=t.includes(u,",")?r(u):u;var c=e(u);return s=a.hasOwnProperty("alpha-"+n)&&1!==a["alpha-"+n]?"rgba("+c.values.rgb.join(",")+","+a["alpha-"+n]+")":c.hexString(),{themeName:f,value:s}}return l?{themeName:void 0,value:void 0}:{themeName:void 0,value:f}},m=function(e,n,a){a(t.reduce(n,function(a,r,l){var i,s=o.stringUtils.startsWith(l,"alpha-");return s?a:l.match("param_color_")?(i=p("param_color_",l),a[i]=t.get(c(l,n,s,e),"value"),a):l.match("param_number_")?(i=p("param_number_",l),a[i]=+r,a):l.match("param_boolean_")?(i=p("param_boolean_",l),a[i]=y(r),a):l.match("param_font_")?(i=p("param_font_",l),a[i]=t.get(d(r,e),"value"),a):void 0},{}))},y=function(e){return t.isBoolean(e)?e:"false"!==e},p=function(t,e){return"style."+e.replace(t,"")},_=function(t,e,n,a){var r=a.THEME_DATA,l=o.stringUtils.startsWith(t,"alpha-");e.hasOwnProperty(t)&&!l&&(t.match("param_color_")?n.colors[t.replace("param_color_","")]=c(t,e,l,r):t.match("param_number_")?n.numbers[t.replace("param_number_","")]=+e[t]:t.match("param_boolean_")?n.booleans[t.replace("param_boolean_","")]=y(e[t]):t.match("param_font_")&&(n.fonts[t.replace("param_font_","")]=d(e[t],r)))},d=function(t,e){var n="object"===(void 0===t?"undefined":_typeof(t))?t.value:JSON.parse(t);return n.fontStyleParam&&"Custom"===n.preset?g(n):n.fontStyleParam&&n.theme?h(n):n.fontStyleParam?v(n,e.font):n.fontParam&&"None"===n.preset?b(n):n.fontParam&&F(n),n},g=function(t){var e=n.fontUtils.getFontFamilyWithFallbacks(t.family),o=t.size+"px",a=Math.floor(1.25*t.size)+"px",r="";r+="font:"+[t.style.italic?"italic":"normal","normal",t.style.bold?"bold":"normal",o+"/"+a,e].join(" ")+";",r+=t.style.underline?"text-decoration:underline;":"",t.value=r},v=function(t,e){var n=H(e)[t.preset];t.value=n.value,t.size=parseInt(n.size,10),t.family=n.fontFamily,t.style.bold="bold"===n.weight,t.style.italic="italic"===n.style,t.style.underline=!1},h=function(t){var e=n.fontUtils.getFontFamilyWithFallbacks(t.family),o=n.fontUtils.parseFontStr(t.preset);t.value="font:"+[o.style,o.variant,o.weight,o.size+"/"+o.lineHeight,e].join(" ")+";",t.size=parseInt(o.size,10),t.family=o.family.toLowerCase(),t.style.bold="bold"===o.weight,t.style.italic="italic"===o.style,t.style.underline=!1},b=function(t){var e="";e+="font-family:"+n.fontUtils.getFontFamilyWithFallbacks(t.family)+";font-style:"+(t.style.italic?"italic":"normal")+";font-weight:"+(t.style.bold?"bold":"normal")+";",e+=t.style.underline?"text-decoration:underline;":"",t.value=e},F=function(t){t.family=t.value,t.value=S(t),t.size=0,t.style={bold:!1,italic:!1,underline:!1}},S=function(t){var e="font-family:"+(t.cssFontFamily||t.value)+";";return e=e.replace(/''/g,"'")},U=function(e,o,a){var r=n.fontUtils.getWixStoredFontsCssUrls(e,o);return a||(r=t.invokeMap(r,String.prototype.replace,/^https?\:/,"")),r},P=function(e,n,o,a,r,s,f){var c=e.THEME_DATA,m={colors:{},numbers:{},booleans:{},fonts:{},googleFontsCssUrl:i(c.font,e,n,r,s),uploadFontFaces:l(c.font,e,a,n)},y=u(n,e);return y?(t.forEach(y,function(t,n){_(n,y,m,e)}),o?t.merge(m,{cssUrls:U(a,r,f)}):m):m},H=function(e){var n=0;return t.reduce({Title:"font_0",Menu:"font_1","Page-title":"font_2","Heading-XL":"font_3","Heading-L":"font_4","Heading-M":"font_5","Heading-S":"font_6","Body-L":"font_7","Body-M":"font_8","Body-S":"font_9","Body-XS":"font_10"},function(t,o,r){return t[r]=a(e[n++],o),t},{})},M=function(e){return t.reduce(e,function(e,n,o){return(o>=1&&o<=5||o>=11&&o<=35)&&e.push({name:"color_"+o,value:t.includes(n,",")?r(n):n}),e},[])},T=function(e){return t.forEach(e,function(e){e.fonts=t.reject(e.fonts,{permissions:"legacy"})}),e};return{getTextPresets:H,getSiteColors:M,getStylesForSDK:P,getStyleDataToPassIntoApp:function(t,e,a,r,l,i,s){var f=e.THEME_DATA,u=o.media.getMediaUrl(i,"editorUI/fonts.v3.png"),c=T(n.fontUtils.getCurrentSelectablefontsWithParams(r,l));return{fonts:{cssUrls:U(i,r,s),imageSpriteUrl:u,fontsMeta:c},siteTextPresets:H(f.font),siteColors:M(f.color),style:t?P(e,t,!1,i,r,l,s):{}}},getNameToFontsKeyMap:function(){var e={Title:"font_0",Menu:"font_1","Page-title":"font_2","Heading-XL":"font_3","Heading-L":"font_4","Heading-M":"font_5","Heading-S":"font_6","Body-L":"font_7","Body-M":"font_8","Body-S":"font_9","Body-XS":"font_10"};return t.invert(e)},getValueForWixParams:m}}),define("styles",["styles/utils/styleUtils"],function(t){return{styleUtils:t}});
//# sourceMappingURL=styles.min.js.map